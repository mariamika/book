!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=19)}({19:function(t,e,n){n(20),n(21),n(22),n(23);function o(){return[{Label:"Show fields depending on a condition",id:"SfShowConditionalHandler",create:function(t){return new SfShowConditionalHandler(t)},ShouldShow:function(t){return!0}},{Label:"Make fields invalid depending on a condition",id:"SfMkFieldInvalidHandler",create:function(t){return new SfMkFieldInvalidHandler(t)},ShouldShow:function(t){return!0}},{Label:"Show a multiple step tab depending on a condition",id:"SfShowStepHandler",create:function(t){return new SfShowStepHandler(t)},ShouldShow:function(t){return"sec"==t.FormType}}]}function i(t,e,n){var o=t.CompiledCondition;void 0!==t.Mode&&"Formula"==t.Mode&&(o=t.Formula.CompiledFormula);var i=null;return i=null==n?new SmartFormsRemote:n.GetRemote(),(t=new Function("formData,Remote","return "+o))(e,i)}RedNaoEventManager.Subscribe("CalculateCondition",function(t){return i(t.Condition,t.Values,t.Instance)}),window.SmartFormsGetConditionalHandlerByType=function(t,e){for(var n=o(),i=0;i<n.length;i++)if(n[i].id==t)return n[i].create(e);throw"Invalid handler"},window.SmartFormsGetConditionalHandlerArray=o,window.SmartFormsCalculateCondition=i},20:function(t,e,n){"use strict";var o=function(){function t(e){this._remote=null,this.PreviousActionWas=-1,null==e?(this.Options={},t.ConditionId++,this.Options.Id=t.ConditionId,this.IsNew=!0):this.Options=e,this.Id=this.Options.Id}return t.prototype.GetOptionsToSave=function(){return this.Options.Label=this.Options.GeneralInfo.Name,this.Options},t.prototype.SubscribeCondition=function(t,e){var n=this,o=[];if("Formula"==t.Mode)for(var i=0,r=t.Formula.FieldsUsed;i<r.length;i++){var s=r[i];o.push(s)}else for(var l=0;l<t.Conditions.length;l++)if(o.push(t.Conditions[l].Field),void 0!==t.Conditions[l].Formula&&"Formula"==t.Conditions[l].Formula.RowMode)for(var a=0,u=t.Conditions[l].Formula.Formula.FieldsUsed;a<u.length;a++){var d=u[a];o.push(d)}RedNaoEventManager.Subscribe("ProcessConditionsAfterValueChanged",function(t){if(o.indexOf(t.FieldName)>-1){var e=n.ProcessCondition(t.Data);null!=e&&t.Actions.push(e)}})},t.prototype.GetRemote=function(){return null==this._remote&&(this._remote=new SmartFormsRemote),this._remote},t.prototype.ProcessCondition=function(t){var e=this,n=RedNaoEventManager.Publish("CalculateCondition",{Condition:this.Condition,Values:t,Instance:this});return n instanceof Promise?(this.ExecutingPromise(),n.then(function(t){return e.ProcessResult(t)})):new Promise(function(t){t(e.ProcessResult(n))})},t.prototype.ProcessResult=function(t){var e=this;if(t){if(1!=this.PreviousActionWas)return{ActionType:"show",Execute:function(){e.PreviousActionWas=1,e.ExecuteTrueAction()}}}else if(0!=this.PreviousActionWas)return{ActionType:"hide",Execute:function(){e.PreviousActionWas=0,e.ExecuteFalseAction(null)}};return null},t.ConditionId=0,t}();window.SfConditionalHandlerBase=o},21:function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(t){function e(e){var n=t.call(this,e)||this;return n.Options.Type="SfShowConditionalHandler",n.Fields="",n.FormElements=null,n}return o(e,t),e.prototype.ExecutingPromise=function(){},e.prototype.GetConditionalSteps=function(){return this.IsNew&&(this.Options.GeneralInfo={},this.Options.FieldPicker={},this.Options.Condition={}),[{Type:"SfNamePicker",Label:"HowDoYouWantToName",Options:this.Options.GeneralInfo,Id:this.Id},{Type:"SfHandlerFieldPicker",Label:"typeOrSelectFieldsToBeShown",Options:this.Options.FieldPicker},{Type:"SfHandlerConditionGenerator",Label:"WhenDoYouWantToDisplay",Options:this.Options.Condition}]},e.prototype.Initialize=function(t,e){this.Form=t,this.PreviousActionWas=-1,this.Condition=this.Options.Condition,this.SubscribeCondition(this.Options.Condition,e),this.ProcessCondition(e).then(function(t){null!=t&&t.Execute()})},e.prototype.HideFields=function(){this.Form.JQueryForm.find(this.GetFieldIds()).css("display","none");for(var t=this.GetFormElements(),e=0;e<t.length;e++)t[e].Ignore()},e.prototype.GetFieldIds=function(){if(""==this.Fields)for(var t=0;t<this.Options.FieldPicker.AffectedItems.length;t++)t>0&&(this.Fields+=","),this.Fields+="#"+this.Options.FieldPicker.AffectedItems[t];return this.Fields},e.prototype.GetFormElements=function(){if(null==this.FormElements){this.FormElements=[];for(var t=0;t<this.Options.FieldPicker.AffectedItems.length;t++)for(var e=this.Options.FieldPicker.AffectedItems[t],n=0;n<this.Form.FormElements.length;n++)this.Form.FormElements[n].Id==e&&this.FormElements.push(this.Form.FormElements[n])}return this.FormElements},e.prototype.ExecuteTrueAction=function(){for(var t=this.GetFormElements(),e=0;e<t.length;e++)t[e].Show(this.Options.Id)},e.prototype.ExecuteFalseAction=function(){for(var t=this.GetFormElements(),e=0;e<t.length;e++)t[e].Hide(this.Options.Id)},e}(SfConditionalHandlerBase);window.SfShowConditionalHandler=i},22:function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(t){function e(e){var n=t.call(this,e)||this;return n.Options.Type="SfMkFieldInvalidHandler",n.Fields="",n.FormElements=null,n}return o(e,t),e.prototype.ExecutingPromise=function(){},e.prototype.GetConditionalSteps=function(){return this.IsNew&&(this.Options.GeneralInfo={},this.Options.FieldPicker={},this.Options.Condition={},this.Options.ErrorMessage={}),[{Type:"SfNamePicker",Label:"HowDoYouWantToName",Options:this.Options.GeneralInfo,Id:this.Id},{Type:"SfHandlerFieldPicker",Label:"whichFieldYouWantToMakeInvalid",Options:this.Options.FieldPicker},{Type:"SfHandlerConditionGenerator",Label:"WhenDoYouWantToMakeInvalid",Options:this.Options.Condition},{Type:"SfTextPicker",Label:"WhatMessageWhenInvalid",Options:this.Options.ErrorMessage}]},e.prototype.Initialize=function(t,e){var n=this;this.Form=t,this.Condition=this.Options.Condition,this.PreviousActionWas=-1,RedNaoEventManager.Subscribe("BeforeValidatingForm",function(t){t.Promises.push(n.ProcessCondition(n.Form.GetCurrentData()).then(function(t){null!=t&&t.Execute()}))})},e.prototype.GetFormElements=function(){if(null==this.FormElements){this.FormElements=[];for(var t=0;t<this.Options.FieldPicker.AffectedItems.length;t++)for(var e=this.Options.FieldPicker.AffectedItems[t],n=0;n<this.Form.FormElements.length;n++)this.Form.FormElements[n].Id==e&&this.FormElements.push(this.Form.FormElements[n])}return this.FormElements},e.prototype.ExecuteTrueAction=function(){for(var t=this.GetFormElements(),e="mfi"+this.Id,n=0;n<t.length;n++)t[n].AddError(e,this.Options.ErrorMessage.Text)},e.prototype.ExecuteFalseAction=function(){for(var t=this.GetFormElements(),e="mfi"+this.Id,n=0;n<t.length;n++)t[n].RemoveError(e)},e}(SfConditionalHandlerBase);window.SfMkFieldInvalidHandler=i},23:function(t,e){var n,o=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function o(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}),i=function(t){function e(e){var n=t.call(this,e)||this;return n.$StepList=[],n.Options.Type="SfShowStepHandler",n.Fields="",n.FormElements=null,n}return o(e,t),e.prototype.ExecutingPromise=function(){},e.prototype.GetConditionalSteps=function(){return this.IsNew&&(this.Options.GeneralInfo={},this.Options.StepPicker={},this.Options.Condition={}),[{Type:"SfNamePicker",Label:"HowDoYouWantToName",Options:this.Options.GeneralInfo,Id:this.Id},{Type:"SfStepPicker",Label:"SelectTheStepsToBeShow",Options:this.Options.StepPicker},{Type:"SfHandlerConditionGenerator",Label:"WhenDoYouWantToDisplay",Options:this.Options.Condition}]},e.prototype.Initialize=function(t,e){var n=this;this.Form=t;var o=this.Options.StepPicker;this.Form.JQueryForm.find(".rnMLStep").each(function(t,e){o.StepsToShow.find(function(t){return t==rnJQuery(e).data("step-id")})&&n.$StepList.push({$element:rnJQuery(e),id:rnJQuery(e).data("step-id")})}),this.PreviousActionWas=-1,this.Condition=this.Options.Condition,this.SubscribeCondition(this.Options.Condition,e),this.ProcessCondition(e).then(function(t){null!=t&&t.Execute()})},e.prototype.GetFormElements=function(){if(null==this.FormElements){this.FormElements=[];for(var t=0;t<this.Options.FieldPicker.AffectedItems.length;t++)for(var e=this.Options.FieldPicker.AffectedItems[t],n=0;n<this.Form.FormElements.length;n++)this.Form.FormElements[n].Id==e&&this.FormElements.push(this.Form.FormElements[n])}return this.FormElements},e.prototype.ExecuteTrueAction=function(){for(var t=function(t){if(void 0===t.OriginalWidth)return"continue";e.Form.MultipleStepsManager.UnIgnoreStep(t.id),t.$element.css("display","block"),t.$element.velocity({width:t.OriginalWidth,"padding-left":30,"padding-right":20},200,"easeInExp",function(){t.$element.css("width","")})},e=this,n=0,o=this.$StepList;n<o.length;n++){t(o[n])}null!=this.Form&&null!=this.Form.MultipleStepsManager&&this.Form.MultipleStepsManager.RefreshNextButtonText()},e.prototype.ExecuteFalseAction=function(){for(var t=function(t){e.Form.MultipleStepsManager.IgnoreStep(t.id),t.OriginalWidth=t.$element.width(),t.$element.velocity({width:0,"padding-left":0,"padding-right":0},200,"easeOutExp",function(){t.$element.css("display","none")})},e=this,n=0,o=this.$StepList;n<o.length;n++){t(o[n])}null!=this.Form&&null!=this.Form.MultipleStepsManager&&this.Form.MultipleStepsManager.RefreshNextButtonText()},e}(SfConditionalHandlerBase);window.SfShowStepHandler=i}});
//# sourceMappingURL=conditionalHandlers_bundle.js.map